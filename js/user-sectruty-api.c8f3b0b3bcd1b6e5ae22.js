!function(e){function t(t){for(var a,o,l=t[0],s=t[1],c=t[2],d=0,_=[];d<l.length;d++)o=l[d],i[o]&&_.push(i[o][0]),i[o]=0;for(a in s)Object.prototype.hasOwnProperty.call(s,a)&&(e[a]=s[a]);for(u&&u(t);_.length;)_.shift()();return r.push.apply(r,c||[]),n()}function n(){for(var e,t=0;t<r.length;t++){for(var n=r[t],a=!0,l=1;l<n.length;l++){var s=n[l];0!==i[s]&&(a=!1)}a&&(r.splice(t--,1),e=o(o.s=n[0]))}return e}var a={},i={10:0},r=[];function o(t){if(a[t])return a[t].exports;var n=a[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.e=function(e){var t=[],n=i[e];if(0!==n)if(n)t.push(n[2]);else{var a=new Promise(function(t,a){n=i[e]=[t,a]});t.push(n[2]=a);var r=document.getElementsByTagName("head")[0],l=document.createElement("script");l.charset="utf-8",l.timeout=120,o.nc&&l.setAttribute("nonce",o.nc),l.src=function(e){return o.p+"js/"+({}[e]||e)+"."+{0:"b1d82bc311e5aff38167"}[e]+".js"}(e);var s=setTimeout(function(){c({type:"timeout",target:l})},12e4);function c(t){l.onerror=l.onload=null,clearTimeout(s);var n=i[e];if(0!==n){if(n){var a=t&&("load"===t.type?"missing":t.type),r=t&&t.target&&t.target.src,o=new Error("Loading chunk "+e+" failed.\n("+a+": "+r+")");o.type=a,o.request=r,n[1](o)}i[e]=void 0}}l.onerror=l.onload=c,r.appendChild(l)}return Promise.all(t)},o.m=e,o.c=a,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)o.d(n,a,function(t){return e[t]}.bind(null,a));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="/",o.oe=function(e){throw e};var l=window.webpackJsonp=window.webpackJsonp||[],s=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var u=s;r.push([761,1]),n()}({101:function(e,t,n){var a=n(746);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(a,i);a.locals&&(e.exports=a.locals)},102:function(e,t,n){var a=n(750);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(a,i);a.locals&&(e.exports=a.locals)},103:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=l(n(3)),i=l(n(4)),r=l(n(15)),o=n(752);function l(e){return e&&e.__esModule?e:{default:e}}t.default={name:"api-interface",components:{DeleteMod:r.default,UserPublic:i.default,TableTitle:a.default},mixins:[o.apiInterface]}},104:function(e,t,n){"use strict";n.r(t);var a=n(103),i=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t.default=i.a},111:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=u(n(3)),i=u(n(415)),r=u(n(13)),o=u(n(4)),l=u(n(11)),s=u(n(753)),c=n(748);function u(e){return e&&e.__esModule?e:{default:e}}t.default={name:"user-sectruty-api",components:{ApiInterface:s.default,PageGuard:l.default,UserPublic:o.default,AssetNotice:r.default,AssetInfo:i.default,TableTitle:a.default},data:function(){return{notice:[this.$_lang("API须知1"),this.$_lang("API须知2")],email_info:{title:this.$_lang("绑定邮箱"),title_active:this.$_lang("完成邮箱绑定"),sub_title:this.$_lang("您还未完成邮箱绑定，目前无法进行创建API操作"),sub_title_active:this.$_lang("您已完成邮箱绑定"),link_name:this.$_lang("立即绑定")},auther_info:{title:this.$_lang("绑定2FA验证器"),title_active:this.$_lang("您已绑定验证器"),sub_title:this.$_lang("您还未绑定2FA验证器，目前无法进行创建API功能"),sub_title_active:this.$_lang("您已绑定验证器"),link_name:this.$_lang("立即绑定")}}},mixins:[c.userSectrutyApi]}},112:function(e,t,n){"use strict";n.r(t);var a=n(111),i=n.n(a);for(var r in a)"default"!==r&&function(e){n.d(t,e,function(){return a[e]})}(r);t.default=i.a},514:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"api-interface g-content"},[n("table-title",{attrs:{title:e.$_lang("已申请的API")}}),e._v(" "),n("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading_table,expression:"loading_table"}],staticClass:"table-wrap g-loading-col1",attrs:{data:e.table_data}},[n("el-table-column",{attrs:{property:"createTime",label:e.$_lang("创建时间")}}),e._v(" "),n("el-table-column",{attrs:{property:"apiKey",label:e.$_lang("API Key")}}),e._v(" "),n("el-table-column",{attrs:{property:"authorityNames",label:e.$_lang("权限")},scopedSlots:e._u([{key:"default",fn:function(t){return[e._v("\n        "+e._s(e.$_lang(t.row.authorityNames))+"\n      ")]}}])}),e._v(" "),n("el-table-column",{attrs:{property:"description",label:e.$_lang("名称")}}),e._v(" "),n("el-table-column",{attrs:{label:e.$_lang("操作")},scopedSlots:e._u([{key:"default",fn:function(t){return n("ul",{},[n("li",{staticClass:"col-gold g-pointer g-inlineblock-mid",on:{click:function(n){e.openAlert(t.row.id,"view")}}},[e._v("\n          "+e._s(e.$_lang("查看"))+"\n        ")]),e._v(" "),n("li",{staticClass:"col-del del g-pointer g-inlineblock-mid",on:{click:function(n){e.openAlert(t.row.id,"del")}}},[e._v("\n          "+e._s(e.$_lang("删除"))+"\n        ")])])}}])})],1),e._v(" "),e.is_view?n("v-alert",{attrs:{title:e.$_lang("查看API"),width:440},on:{cancel:function(t){e.is_view=!1}}},[n("user-public",{attrs:{width:"100%"},on:{handle:function(t){e.sendCode("viewApiKey")},change:function(t){return e.ver_code=t},validate:function(t){return e.code_validate=t},confirm:e.getDetail}})],1):e._e(),e._v(" "),e.show_detail&&e.detail_info?n("v-alert",{attrs:{width:680,title:e.$_lang("API信息")},on:{cancel:e.closeDetail}},[n("div",{staticClass:"g-font16"},[n("div",{staticClass:"alert-item"},[n("span",[e._v(e._s(e.$_lang("备注名称"))+":")]),e._v("\n        "+e._s(e.detail_info.description)+"\n      ")]),e._v(" "),n("div",{staticClass:"alert-item"},[n("span",[e._v(e._s(e.$_lang("权限"))+":")]),e._v("\n        "+e._s(e.detail_info.authorityNames)+"\n      ")]),e._v(" "),n("div",{staticClass:"alert-item"},[n("span",[e._v("API Key:")])]),e._v(" "),n("div",{staticClass:"alert-item g-relative"},[n("input",{ref:"key",staticClass:"g-input",attrs:{readonly:"",type:"text"},domProps:{value:e.detail_info.apiKey}}),e._v(" "),n("button",{staticClass:"btn-copy g-absolute g-pointer",on:{click:function(t){t.stopPropagation(),e.copyVal("key")}}},[e._v("\n          "+e._s(e.$_lang("复制"))+"\n        ")])]),e._v(" "),n("div",{staticClass:"alert-item"},[n("span",[e._v("Secret Key:")])]),e._v(" "),n("div",{staticClass:"alert-item g-relative"},[n("input",{ref:"secret",staticClass:"g-input",attrs:{readonly:"",type:"text"},domProps:{value:e.detail_info.secretKey}}),e._v(" "),n("button",{staticClass:"btn-copy g-absolute g-pointer",on:{click:function(t){t.stopPropagation(),e.copyVal("secret")}}},[e._v("\n          "+e._s(e.$_lang("复制"))+"\n        ")])])])]):e._e(),e._v(" "),e.is_del?n("delete-mod",{attrs:{content:e.$_lang("API删除后无法恢复，请确认是否删除")},on:{cancel:function(t){e.is_del=!1},value:function(t){return e.ver_code=t},confirm:e.onDelete,handle:function(t){e.sendCode("deleteApiKey")}}}):e._e()],1)},i=[];a._withStripped=!0,n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},538:function(e,t,n){"use strict";var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"user-sectruty-api"},[n("v-header"),e._v(" "),n("page-guard",{attrs:{title:e.$_lang("抱歉，您需要完成以下全部操作，才可以使用API功能"),email_info:e.email_info,auther_info:e.auther_info}},[n("div",{staticClass:"g-wrap g-container"},[n("v-breadcrumb",{attrs:{list:e.breadcrumbList}}),e._v(" "),n("div",{staticClass:"body"},[n("div",{staticClass:"creat-api g-between"},[n("div",{staticClass:"g-content left-container"},[n("table-title",{attrs:{title:e.$_lang("创建API"),separator:""}}),e._v(" "),n("el-form",{ref:"create_form",staticClass:"content",attrs:{model:e.create_source,"label-position":"left","label-width":"110px"}},[n("el-form-item",{attrs:{prop:"remark.value",rules:e.create_source.remark.rule,label:e.$_lang("备注名称")}},[n("el-input",{attrs:{placeholder:e.$_lang("请输入API备注名")},model:{value:e.create_source.remark.value,callback:function(t){e.$set(e.create_source.remark,"value",t)},expression:"create_source.remark.value"}})],1),e._v(" "),n("el-form-item",[n("el-checkbox-group",{model:{value:e.api_author,callback:function(t){e.api_author=t},expression:"api_author"}},[n("el-checkbox",{attrs:{disabled:""}},[n("span",{staticClass:"col-default"},[e._v(e._s(e.$_lang("交易")))])])],1)],1),e._v(" "),n("el-form-item",{attrs:{label:e.$_lang("邮箱验证码")}},[n("v-code-input",{staticClass:"code-input",attrs:{code_tip:e.code_tip,"show-icon":!1,placeholder:e.$_lang("请输入邮箱验证码")},on:{change:function(t){return e.ecode=t},handle:function(t){e.sendCode("generateApiKey")},validate:function(t){return e.is_ecode=t},ready:e.onReady}})],1),e._v(" "),n("el-form-item",{attrs:{prop:"token.value",rules:e.create_source.token.rule,label:e.$_lang("双重验证")}},[n("el-input",{attrs:{placeholder:e.$_lang("请输入2FA验证码")},model:{value:e.create_source.token.value,callback:function(t){e.$set(e.create_source.token,"value",t)},expression:"create_source.token.value"}})],1),e._v(" "),n("el-form-item",[n("el-button",{staticClass:"g-btn-one btn-add",attrs:{loading:e.loading_create},on:{click:e.creatApi}},[e._v("\n                  "+e._s(e.$_lang("添加"))+"\n                ")])],1)],1)],1),e._v(" "),n("asset-notice",{attrs:{title:e.$_lang("API须知"),list:e.notice}},[n("a",{staticClass:"col-gold",attrs:{target:"_blank",href:e.$_url.documents}},[e._v(e._s(e.$_lang("查看《API文档》")))])])],1),e._v(" "),n("api-interface",{on:{getApiList:function(t){return e.getApiList=t}}})],1)],1)]),e._v(" "),n("v-footer")],1)},i=[];a._withStripped=!0,n.d(t,"a",function(){return a}),n.d(t,"b",function(){return i})},743:function(e,t,n){},744:function(e,t,n){var a=n(743);"string"==typeof a&&(a=[[e.i,a,""]]);var i={hmr:!0,transform:void 0,insertInto:void 0};n(1)(a,i);a.locals&&(e.exports=a.locals)},746:function(e,t,n){},747:function(e,t,n){"use strict";var a=n(101);n.n(a).a},748:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.userSectrutyApi={data:function(){var e=this,t=function(t,n,a){""!==t?n():n(e.$_lang(a))};return{create_source:{remark:{value:"",rule:{validator:function(e,n,a){t(n,a,"备注名不能为空")},trigger:"blur"}},token:{value:"",rule:{validator:function(e,n,a){t(n,a,"验证码不能为空")},trigger:"blur"}}},code_tip:!1,ecode:"",is_token:!1,loading_create:!1,api_author:!0,breadcrumbList:[{name:"安全",link:this.$_url.user_overview},{name:"API"}],getApiList:null,aac:!1}},methods:{onReady:function(e){this.codeReset=e},sendCode:function(e){this.$_http.sendVCode({type:e})},creatApi:function(){var e=this;this.code_tip=!this.code_tip,this.$refs.create_form.validate(function(t){if(t||e.is_ecode){var n={apiAuthorities:1};n.description=e.create_source.remark.value,n.token=e.create_source.token.value,n.ecode=e.ecode,e.$_http.creatApiPair(n).then(function(t){if(0!==t.status)return e.$message.error(e.$_lang(t.msg));e.$message.success(e.$_lang(t.msg)),e.codeReset.resetFields(),e.$refs.create_form.resetFields(),e.getApiList&&e.getApiList()})}})}}}},750:function(e,t,n){},751:function(e,t,n){"use strict";var a=n(102);n.n(a).a},752:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.apiInterface={data:function(){return{table_data:[],loading_table:!0,is_view:!1,ver_code:null,code_validate:!1,item_id:"",show_detail:!1,detail_info:null,is_del:!1}},methods:{openAlert:function(e,t){this.item_id=e,"view"===t?this.is_view=!0:this.is_del=!0},sendCode:function(e){this.$_http.sendVCode({type:e})},getApiList:function(){var e=this;this.loading_table=!0,this.$_http.apiPairList().then(function(t){if(0!==t.status)return e.message.warning(e.$_lang(t.msg));e.loading_table=!1,e.table_data=t.dataWrapper.apiPairs})},getDetail:function(){var e=this;this.code_validate&&this.$_http.getApiDetail({id:this.item_id,ecode:this.ver_code.code,token:this.ver_code.token}).then(function(t){if(0!==t.status)return e.$message.warning(e.$_lang(t.msg));var n=t.dataWrapper.apiPair;e.detail_info=n,e.is_view=!1,e.show_detail=!0})},closeDetail:function(){this.is_view=!1,this.ver_code=null,this.detail_info=null,this.code_validate=!1},onDelete:function(){var e=this;this.$_http.apiPairDelete({ecode:this.ver_code.code,token:this.ver_code.token,id:this.item_id}).then(function(t){if(0!==t.status)return e.$message.warning(e.$_lang(t.msg));e.getApiList(),e.is_del=!1})},copyVal:function(e){var t=this;this.$_lib.documentCopy(this.$refs[e]).then(function(e){return e?t.$message.success(t.$_lang("复制成功")):t.$message.error(t.$_lang("复制失败，请手动复制"))})}},created:function(){this.getApiList(),this.$emit("getApiList",this.getApiList)}}},753:function(e,t,n){"use strict";n.r(t);var a=n(514),i=n(104);for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);n(751);var o=n(0),l=Object(o.a)(i.default,a.a,a.b,!1,null,"5613c290",null);l.options.__file="src/lbank/views/user-sectruty-api/modules/api-interface.vue",t.default=l.exports},760:function(e,t,n){"use strict";n.r(t);var a=n(538),i=n(112);for(var r in i)"default"!==r&&function(e){n.d(t,e,function(){return i[e]})}(r);n(747);var o=n(0),l=Object(o.a)(i.default,a.a,a.b,!1,null,"6a9ce5d4",null);l.options.__file="src/lbank/views/user-sectruty-api/user-sectruty-api.vue",t.default=l.exports},761:function(e,t,n){"use strict";var a,i=n(2),r=n(760),o=(a=r)&&a.__esModule?a:{default:a};n(744),i.utils.isLogin?(0,i.Render)(function(){new Vue({el:"#app",components:{primary:o.default},template:"<primary/>"})}):location.href=i.url.login}});